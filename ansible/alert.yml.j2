additionalPrometheusRulesMap:
  rule-name:
    groups:
    - name: All Instances
      rules:
      - alert: InstanceDown
        expr: up == 0
        for: 15s
        annotations:
          title: 'Instance {{ $labels.instance }} is down'
        labels:
          severity: 'critical'
config:
    route:
      group_by: ['namespace']
      receiver: 'Monitoring Team'
      routes:
        - receiver: 'slack'
        - receiver: 'mail'
    receivers:
    - name: 'slack'
      slack_configs:
        - channel: '#channel-name'
          api_url: {{ slack_api }}
          send_resolved: true
          icon_url: https://avatars3.githubusercontent.com/u/3380462
          text: >-
           {{ range .Alerts -}}
           *Alert:* {{ .Annotations.title }}{{ if .Labels.severity }} - `{{ .Labels.severity }}`{{ end }}

           *Description:* {{ .Annotations.description }}

           *Details:*
             {{ range .Labels.SortedPairs }} â€¢ *{{ .Name }}:* `{{ .Value }}`
             {{ end }}
           {{ end }}
    receivers:
    - name: 'mail'
      email_configs:
      - to: {{ receiver }} 
        from: {{ email }}
        smarthost: {{ mail_server }}
        auth_username: {{ email }}
        auth_identity: {{ email }}
        auth_password: {{ email_password }}
        send_resolved: true
